"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _mapResultKey(e){return this._keysFromKey(e[0])}function _mapResultValue(e){return e[1]}function _mapResultEntry(e){return[this._keysFromKey(e[0]),e[1]]}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),NDEMapIterator=function e(t,n){_classCallCheck(this,e);var r=t._root.entries();this.next=function(){var e=r.next();return e.done||(e.value=n(e.value)),e},this[Symbol.iterator]=function(){return this}},NDEMap=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:":";if(_classCallCheck(this,e),this._separator=n,this._dimensions=parseInt(t,10),!this._dimensions||this._dimensions<1)throw new Error("new NDEMap: Dimensions must be > 0");this._root=new Map,this[Symbol.iterator]=function(){return this.entries()}}return _createClass(e,[{key:"_keyFromKeys",value:function(e){return e.join(this._separator)}},{key:"_keysFromKey",value:function(e){return e.split(this._separator)}},{key:"clear",value:function(){this._root.clear()}},{key:"delete",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length!==this._dimensions)throw new Error("Number of keys given does not match dimensions. Have "+this._dimensions+" dimensions, and "+t.length+" keys");return this._root.delete(this._keyFromKeys(t))}},{key:"get",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length!==this._dimensions)throw new Error("Number of keys given does not match dimensions. Have "+this._dimensions+" dimensions, and "+t.length+" keys");return this._root.get(this._keyFromKeys(t))}},{key:"has",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t.length!==this._dimensions)throw new Error("Number of keys given does not match dimensions. Have "+this._dimensions+" dimensions, and "+t.length+" keys");return this._root.has(this._keyFromKeys(t))}},{key:"set",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop();if(t.length!==this._dimensions)throw new Error("Number of keys given does not match dimensions. Have "+this._dimensions+" dimensions, and "+t.length+" keys");return this._root.set(this._keyFromKeys(t),r)}},{key:"entries",value:function(){return new NDEMapIterator(this,_mapResultEntry.bind(this))}},{key:"keys",value:function(){return new NDEMapIterator(this,_mapResultKey.bind(this))}},{key:"values",value:function(){return new NDEMapIterator(this,_mapResultValue.bind(this))}},{key:"forEach",value:function(e,t){var n=this;return this._root.forEach(function(r,s){e.call(t,r,n._keysFromKey(s),n)},t)}},{key:"size",get:function(){return this._root.size}}]),e}();module.exports=NDEMap;